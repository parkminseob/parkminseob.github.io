---
title: 모두의 네트워크 Chap8 - 네트워크의 전체 흐름 살펴보기
toc : true
categories:
  - Network
tags:
  - network
---

## 랜 카드에서의 데이터 전달과 처리

### 네트워크의 구성

![image](https://user-images.githubusercontent.com/68311188/97797079-2bf5d700-1c5d-11eb-8942-a07a0edeee81.png)

#### OSI모델 하위계층

L1 : 물리 계층

- 데이터를 전기 신호로 변환하는 데 필요하다.
- 매체 접근에 있어 기계적, 전기적인 물리적 절차를 규정한다.

L2 : 데이터 링크 계층

- 랜에서 데이터를 송수신하는 데 필요하다.
- 개방형 실스템 간의 정보 전송, 전송 오류를 제어한다.

L3 : 네트워크 계층

- 다른 네트워크에 있는 목적지에 데이터를 전달하는 데 필요하다.
- 정보 교환 및 중계 기능, 경로 선정, 유통을 제어한다.



#### OSI모델 상위 계층

L4 : 전송 계층 

- 목적지에 데이터를 정확하게 전달하는 데 필요하다.
- 송수신 시스템 간의 논리적 안정과 균일한 서비스를 제공한다.

L7 : 응용 계층(세션 계층과 표현 계층 포함)

- 애플리케이션 등에서 사용하는 데이터를 송수신하는 데 필요하다.
- 응용 프로세스 간의 연결 접속 및 동기를 제어한다.
- 정보의 형식 설정과 부호 교환, 암호화, 해독한다.
- 1~6계층을 활용하여 OSI환경의 사용자에게 데이터베이스, 전자 사서함 등 다양한 응용 프로그램을 제공한다.

![KakaoTalk_20201101_162544901](https://user-images.githubusercontent.com/68311188/97797256-f7831a80-1c5e-11eb-9b83-9676aca07611.jpg)

(OSI모델로 나타낸 네트워크 구성)



### 컴퓨터의 데이터가 전기 신호로 변환되는 과정

#### OSI모델의 캡슐화와 역캡슐화

컴퓨터의 웹 브라우저에 URL을 입력하는 순간 OSI모델의 캡슐화가 이루어진다. 웹 사이트에 접속해야 하므로 **응용 계층**에서 시작한다.

> URL이란?
>
> Uniform Resource Locator의 약자로 리소스의 구체적인 위치 정보를 지정한다.

웹 브라우저를 이용하여 웹 서버의 웹사이트에 접속하기 위한 요청을 보낼 때 사용하는 것이 HTTP프로토콜이다. 응용 계층에서는 웹 서버에 있는 html 데이터를 얻어야 하므로 `GET /index.html HTTP/1.1 ~`과 같은 **HTTP**메시지를 보낸다. HTTP메시지의 GET은 데이터를 보내 달라는 의미로 **전송 계층**에 전달된다. 전송계층에서는 **TCP헤더**가 붙는다.

전송 계층의 TCP헤더에서 데이터 식별할 때 **출발지 포트 번호**와 **목적지 포트 번호**가 필요하다. 출발지 포트 번호는 잘 알려진 포트(1025번 이상의 포트)를 제외한 포트 중에서 무작위로 선택된다. 목적지 포트 번호는 HTTP이므로 80번 포트가 된다.

이러한 TCP헤더를 가진 데이터를 **세그먼트**라고 한다. 세그먼트는 **네트워크 계층**에 전달된다. 네트워크 계층에서는 전송 계층에서 전달받은 세그먼트에 **IP헤더**를 붙인다. IP헤더에는 출발지 IP주소와 목적지 IP주소가  붙는다. IP헤더가 붙은 데이터는 **IP 패킷**이 된다.

IP패킷은 데이터 링크 계층으로 전달되어 **이더넷 헤더**가 붙게 된다. 데이터 링크 계층에서 이더넷 헤더가 붙은 데이터는 **이더넷 프레임**이 되고, 물리계층에서 전기신호로 변환되어 네트워크로 전송된다.



위의 장황한 내용을 그림으로 설명하면 아래와 같다.

![KakaoTalk_20201101_181316193](https://user-images.githubusercontent.com/68311188/97798938-fefdf000-1c6d-11eb-82c9-b5be77ff562b.jpg)